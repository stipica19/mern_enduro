"use strict";(self.webpackChunkenduro_drift=self.webpackChunkenduro_drift||[]).push([[192],{1192:function(e,n,r){r.r(n),r.d(n,{default:function(){return m}});var t=r(9439),i=r(2791),a=r(184),s=function(e){var n=e.clickedImg,r=e.setClickedImg,t=e.handelRotationRight,i=e.handelRotationLeft,s=function(e){e.target.classList.contains("dismiss")&&r(null)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"overlay dismiss",onClick:s,children:[(0,a.jsx)("img",{src:"api/".concat(n),alt:"bigger pic"}),(0,a.jsx)("span",{className:"dismiss",onClick:s,children:"X"}),(0,a.jsx)("div",{onClick:i,className:"overlay-arrows_left",children:(0,a.jsx)("div",{children:(0,a.jsx)("svg",{xmlns:"https://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})})}),(0,a.jsx)("div",{onClick:t,className:"overlay-arrows_right",children:(0,a.jsx)("div",{children:(0,a.jsx)("svg",{xmlns:"https://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})},c=r(4569),l=r.n(c);var o=function(){var e=(0,i.useState)(1),n=(0,t.Z)(e,2),r=n[0],a=n[1],s=(0,i.useRef)(null),c=(0,i.useCallback)((function(e){(0,t.Z)(e,1)[0].isIntersecting&&a((function(e){return e+5}))}),[]);return(0,i.useEffect)((function(){var e=new IntersectionObserver(c,{root:null,rootMargin:"0px",threshold:1});s.current&&e.observe(s.current)}),[c]),{loadMoreRef:s,skip:r}},d=r(3433),u=r(5861),f=r(7757),h=r.n(f);var v=function(e){var n=(0,i.useState)(!1),r=(0,t.Z)(n,2),a=r[0],s=r[1],c=(0,i.useState)([]),l=(0,t.Z)(c,2),o=l[0],f=l[1],v=(0,i.useState)(!1),x=(0,t.Z)(v,2),m=x[0],g=x[1],p=(0,i.useCallback)((0,u.Z)(h().mark((function n(){var r,t;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s(!0),n.next=4,fetch("api/index/getPhoto/?skip=".concat(e));case 4:return r=n.sent,n.next=7,r.json();case 7:if(0!==(null===(t=n.sent)||void 0===t?void 0:t.length)){n.next=11;break}return g(!0),n.abrupt("return");case 11:f((function(e){return[].concat((0,d.Z)(e),(0,d.Z)(t.reverse()))})),s(!1),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.error(n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])}))),[e]);return(0,i.useEffect)((function(){p()}),[p]),{loading:a,photos:o,isEnd:m}},x=r(6030),m=function(){var e=o(),n=e.loadMoreRef,r=e.skip,c=v(r),d=c.loading,u=c.photos,f=c.isEnd,h=(0,x.v9)((function(e){return e.userLogin})).userInfo,m=u.map((function(e,n){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"delete-x",children:[h&&h.isAdmin&&(0,a.jsx)("button",{className:"delete-btn",onClick:function(){return function(e){var n={headers:{Authorization:"Bearer ".concat(h.token)}};l().delete("/api/index/deletePhoto/".concat(e),n),window.location.reload(!1)}(e._id)},children:"X"}),(0,a.jsx)("img",{src:"/api/".concat(e.image),alt:e.image,onClick:function(){return R(e,n)}})]},e._id)})})),g=(0,i.useState)(null),p=(0,t.Z)(g,2),j=p[0],k=p[1],w=(0,i.useState)(null),b=(0,t.Z)(w,2),N=b[0],C=b[1],R=function(e,n){C(n),k(e.image)};return(0,a.jsx)("section",{className:"docs-main gallery",children:(0,a.jsxs)("div",{className:"grid-1 container",children:[(0,a.jsx)("div",{className:"card flex",children:(0,a.jsx)("h1",{children:"GALLERY"})}),(0,a.jsx)("div",{className:"card flex",children:(0,a.jsxs)("div",{className:"grid-inner",children:[(0,a.jsx)("div",{className:"ga",children:(0,a.jsx)("div",{className:"grid-container",children:m})}),(0,a.jsxs)("div",{ref:n,children:[d&&(0,a.jsx)("p",{children:"Loading..."}),f&&(0,a.jsx)("p",{})]}),(0,a.jsx)("div",{children:j&&(0,a.jsx)(s,{clickedImg:j,handelRotationRight:function(){var e=u.length;if(N+1>=e){C(0);var n=u[0].image;k(n)}else{var r=N+1,t=u.filter((function(e){return u.indexOf(e)===r}))[0].image;k(t),C(r)}},setClickedImg:k,handelRotationLeft:function(){var e=u.length;if(0!==N){var n=N-1,r=u.filter((function(e){return u.indexOf(e)===n}))[0].image;k(r),C(n)}else{C(e-1);var t=u[e-1].image;k(t)}}})})]})})]})})}},3433:function(e,n,r){r.d(n,{Z:function(){return s}});var t=r(907);var i=r(9199),a=r(181);function s(e){return function(e){if(Array.isArray(e))return(0,t.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=192.a25d8cc5.chunk.js.map